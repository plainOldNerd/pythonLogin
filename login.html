<html>
<head>
    <script type="text/javascript" src="scripts/login.js"></script>
    <script>
        const handleUsernameChange = async node => {
            fetch('/checkUsernameExists', {
                method: "POST",
                body: "username=" + node.value,
            }).then(async response => {
                const responseValue = await response.json();
                console.log(responseValue.usernameExists);
            });
        };
    </script>
</head>
<body>
    <form id="form" action="./" method="post">
        Username: <input 
            name="username" 
            type="text" 
            onchange="handleUsernameChange(this)"
            required
        /><br />
        Password: <input name="password" type="password" required/><br />
        Favourite colour: 
        <select name="faveColour" id="faveColour"></select><br />
        Favourite animal: <input name="faveAnimal" type="text" /><br />
        Favourite size: <select name="animalSize" id="animalSize"></select><br />
        <button type="submit">Submit</button>
        <div id="forbiddenChars" style="color:red; display:none;">
            Text input fields must not contain the = or & characters!
        </div>
    </form>
</body>
</html>